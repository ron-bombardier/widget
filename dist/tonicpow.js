(()=>{var t={523:(t,e,n)=>{"use strict";n.r(e),n.d(e,{keyValLib:()=>l,get:()=>h,set:()=>d,getAll:()=>u,getConfiguredCache:()=>g});var i,o=function(t,e){void 0===t&&(t="keyval-store"),void 0===e&&(e="keyval"),this.storeName=e,this._dbp=new Promise((function(n,i){var o=indexedDB.open(t,1);o.onerror=function(){return i(o.error)},o.onsuccess=function(){return n(o.result)},o.onupgradeneeded=function(){o.result.createObjectStore(e)}}))};function s(){return i||(i=new o),i}o.prototype._withIDBStore=function(t,e){var n=this;return this._dbp.then((function(i){return new Promise((function(o,s){var r=i.transaction(n.storeName,t);r.oncomplete=function(){return o()},r.onabort=r.onerror=function(){return s(r.error)},e(r.objectStore(n.storeName))}))}))};var r={Store:o,get:function(t,e){var n;return void 0===e&&(e=s()),e._withIDBStore("readonly",(function(e){n=e.get(t)})).then((function(){return n.result}))},set:function(t,e,n){return void 0===n&&(n=s()),n._withIDBStore("readwrite",(function(n){n.put(e,t)}))},del:function(t,e){return void 0===e&&(e=s()),e._withIDBStore("readwrite",(function(e){e.delete(t)}))},clear:function(t){return void 0===t&&(t=s()),t._withIDBStore("readwrite",(function(t){t.clear()}))},keys:function(t){void 0===t&&(t=s());var e=[];return t._withIDBStore("readonly",(function(t){(t.openKeyCursor||t.openCursor).call(t).onsuccess=function(){this.result&&(e.push(this.result.key),this.result.continue())}})).then((function(){return e}))}},a={maxAge:1/0,version:0,lib:r},c=function(t){return Object.assign({},a,t)},l=r,h=function(t,e,n){var i=c(e),o=i.maxAge,s=i.version,r=i.lib;return r.get(t,n).then(JSON.parse).then((function(e){return Date.now()-e.time>o||s!==e.version?(r.del(t,n),null):e.data})).catch((function(){return null}))},d=function(t,e,n,i){var o=c(n),s=o.lib,r=o.version;return s.set(t,JSON.stringify({version:r,time:Date.now(),data:e}),i).catch((function(){return null}))},u=function(t,e){var n,i=c(t);return i.lib.keys(e).then((function(t){return n=t,Promise.all(n.map((function(t){return h(t,i,e)})))})).then((function(t){return t.reduce((function(t,e,i){return e&&(t[n[i]]=e),t}),{})})).catch((function(){}))},g=function(t){var e,n=c(t);return n.name&&(e=new o(n.name,n.name)),{get:function(t){return h(t,n,e)},set:function(t,i){return d(t,i,n,e)},getAll:function(){return u(n,e)},del:function(t){return n.lib.del(t,e)},clear:function(){return n.lib.clear(e)},keys:function(){return n.lib.keys(e)}}}},913:(t,e,n)=>{var i;void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.isEnvironmentValid=t=>this.environments.includes(t),this.setEnvironment=t=>{t&&this.isEnvironmentValid(t)&&(this.environment=t,t===this.environmentStaging?(this.apiUrl=this.apiUrlStaging,this.eventsUrl=this.eventsUrlStaging,this.hostUrl=this.hostUrlStaging):t===this.environmentLocal?(this.apiUrl=this.apiUrlLocal,this.eventsUrl=this.eventsUrlLocal,this.hostUrl=this.hostUrlLocal):t===this.environmentProduction&&(this.apiUrl=this.apiUrlProduction,this.eventsUrl=this.eventsUrlProduction,this.hostUrl=this.hostUrlProduction))},this.environmentLocal="local",this.environmentStaging="staging",this.environmentProduction="production",this.apiUrl="https://api.tonicpow.com",this.apiUrlLocal="http://localhost:3000",this.apiUrlStaging="https://api.staging.tonicpow.com",this.apiUrlProduction="https://api.tonicpow.com",this.eventsUrl="https://events.tonicpow.com",this.eventsUrlLocal="http://localhost:3002",this.eventsUrlStaging="https://events.staging.tonicpow.com",this.eventsUrlProduction="https://events.tonicpow.com",this.hostUrl="http://tonicpow.com",this.hostUrlLocal="http://localhost",this.hostUrlStaging="https://web.staging.tonicpow.com",this.hostUrlProduction="https://tonicpow.com",this.customEnvironmentAttribute="data-environment",this.environment="",this.environments=[this.environmentLocal,this.environmentStaging,this.environmentProduction],this.maxSessionDays=60,this.sessionParameterName="tncpw_session",this.challengeParameterName="tncpw_challenge",this.version="v0.0.10",this.widgetDivClass="tonicpow-widget",this.widgetIdAttribute="data-widget-id"}}}.apply(e,[n,e]))||(t.exports=i)},242:function(t,e,n){var i,o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((i=i.apply(t,e||[])).next())}))};void 0===(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t="",e="",n){this.sendPing=()=>{setTimeout((()=>{this.sendEvent("ping",((new Date).getTime()-this.start).toString())}),4e3)},this.detectWidgetClick=()=>{document.addEventListener("click",(t=>o(this,void 0,void 0,(function*(){var e,n;const i=(t||window.event).target,o=null===(e=null==i?void 0:i.parentElement)||void 0===e?void 0:e.parentElement;if(null===(n=null==o?void 0:o.classList)||void 0===n?void 0:n.contains("tonicpow-widget"))try{yield this.sendEvent("widget_click",o.getAttribute(this.config.widgetIdAttribute)||"")}catch(t){console.error("failed to report interaction: widget_click",t)}}))))},this.detectBounce=()=>{window.onbeforeunload=()=>{this.sendEvent("bounce",((new Date).getTime()-this.start).toString())}},this.sendChallengeResponse=()=>{try{this.sendEvent("challenge",this.challengeGuid)}catch(t){console.error("Failed to send challenge response",t)}},this.detectInteraction=()=>{document.addEventListener("mousedown",(()=>o(this,void 0,void 0,(function*(){if(!this.interactionSent)try{this.interactionSent=!0,yield this.sendEvent("interaction","mousedown")}catch(t){console.error("failed to report interaction: mousedown",t)}})))),document.addEventListener("scroll",(()=>o(this,void 0,void 0,(function*(){if(!this.interactionSent)try{this.interactionSent=!0,yield this.sendEvent("interaction","scroll")}catch(t){console.error("failed to report interaction: scroll",t)}})))),document.addEventListener("keypress",(()=>o(this,void 0,void 0,(function*(){if(!this.interactionSent)try{this.interactionSent=!0,yield this.sendEvent("interaction","keypress")}catch(t){console.error("failed to report interaction: keypress",t)}}))))},this.sendEvent=(t,e)=>o(this,void 0,void 0,(function*(){if(!this.sessionId&&!this.challengeGuid)return void console.info("you must call init with a session before sending events");const n=window.location.href,i={v:this.config.version,name:t,location:n,data:e};this.sessionId&&(i.tncpw_session=this.sessionId),yield fetch(`${this.config.eventsUrl}/v1/events?d=${btoa(JSON.stringify(i))}`,{method:"get"})})),this.sessionId=t,this.config=n,this.challengeGuid=e,this.interactionSent=!1,this.start=(new Date).getTime(),this.challengeGuid&&this.challengeGuid.length>0?this.sendChallengeResponse():(this.detectInteraction(),this.detectBounce(),this.detectWidgetClick(),this.sendPing())}}}.apply(e,[n,e]))||(t.exports=i)},607:function(t,e,n){var i,o,s=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((i=i.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};i=[n,e,n(913),n(242),n(523)],void 0===(o=function(t,e,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=r(n),i=r(i);class a{constructor(t){this.setOreo=(t,e,n)=>{const i=new Date;i.setTime(i.getTime()+864e5*n),document.cookie=`${t}=${e};path=/;expires=${i.toUTCString()}`},this.captureVisitorSession=(t="",e="")=>s(this,void 0,void 0,(function*(){let n=t,i=e;const o=new URLSearchParams(window.location.search);return t&&t.length||"undefined"==typeof window||(n=o.get(this.config.sessionParameterName)||null),e&&e.length||"undefined"==typeof window||(i=o.get(this.config.challengeParameterName)||null),n&&n.length>0&&(this.setOreo(this.config.sessionParameterName,n,this.config.maxSessionDays),this.cache.set(this.config.sessionParameterName,n,864e5*this.config.maxSessionDays)),i&&i.length>0&&this.cache.set(this.config.challengeParameterName,i,6e4),{sessionId:n,challengeGuid:i}})),this.getVisitorSession=()=>this.cache.get(this.config.sessionParameterName),this.loadDivs=()=>s(this,void 0,void 0,(function*(){const t=document.getElementsByClassName(this.config.widgetDivClass);for(let e=t.length-1;e>=0;e--){const n=t[e];if(!n){console.log("exit early - remove this?");continue}const i=n.getAttribute(this.config.customEnvironmentAttribute);switch(this.config.setEnvironment(i||"production"),n.getAttribute("data-widget-type")){case"share-button":this.initializeButton(n);break;case"banner":default:yield this.initializeBanner(n)}}})),this.getDataAttributes=function(t){const e={};return[].forEach.call(t.attributes,(function(t){if(/^data-/.test(t.name)){const n=t.name.substr(5).replace(/-(.)/g,(function(t,e){return e.toUpperCase()}));e[n]=t.value}})),e},this.shareButton=(t,e)=>{this.shareButtons.set(t,e)},this.closePopup=()=>{const t=document.getElementById("tonicpow-widget-popup");t&&t.remove()},this.load=()=>s(this,void 0,void 0,(function*(){if("undefined"==typeof window)return void console.error("TonicPow embed only works in the browser");const t=document.getElementsByClassName(this.config.widgetDivClass);if(t&&t.length>0)try{yield this.loadDivs(),console.log("%c TonicPow widget(s) loaded! ","background: #974CD2; color: #fff")}catch(t){throw t}const{sessionId:e,challengeGuid:n}=yield this.captureVisitorSession();(e||n)&&(this.events=new i.default(e||"",n||"",this.config))})),this.config=new n.default,this.widgets=new Map,this.options=t,this.cache=o.getConfiguredCache({version:1,name:"tonic-pow-widget"}),this.buttonViewsInitialized=!1,this.shareButtons=new Map,this.nrOfButtons=0,"complete"===document.readyState||"interactive"===document.readyState?this.load():document.addEventListener("DOMContentLoaded",(()=>{this.load()}))}initializeButton(t){const e=this.getDataAttributes(t);e.buttonId||(t.id="tonicpow-button-id-"+this.nrOfButtons++,e.buttonId=t.id);const n=this.shareButtons.get(e.buttonId)||{};for(const t in e)!e.hasOwnProperty(t)||n&&n.hasOwnProperty(t)||(n[t]=e[t]);let i="";for(const t in n)n.hasOwnProperty(t)&&"string"==typeof n[t]&&(i+=`&${t}=${n[t]}`);n.width||(n.width="150"),n.height||(n.height="50"),n.targetUrl||(n.targetUrl=encodeURIComponent(document.location.href)),this.shareButtons.set(e.buttonId,n),t.innerHTML=`\n      <iframe\n        src='${this.config.hostUrl}/share_button.html?targetUrl=${n.targetUrl}${i}'\n        class='tonicpow-widget-share-button'\n        width='${n.width}'\n        height='${n.height}'\n      />`,this.initializeButtonViews()}initializeButtonViews(){if(!this.buttonViewsInitialized){const t="\n          * { clear: all }\n          .tonicpow-widget-share-button { border: none; }\n          .tonicpow-widget-share-button > iframe { overflow: hidden; }\n          .tonicpow-modal { font-family: Nunito, Arial; display: flex; align-items: center; padding: 0 1em; text-align: center; width: 100%; height: 100%; position: fixed; top: 0; left: 0; }\n          .tonicpow-modal__overlay { background: black; bottom: 0; left: 0; position: fixed; right: 0; text-align: center; top: 0; z-index: -800; opacity: 0.5; }\n          .tonicpow-modal__box { padding: 25px; position: relative; margin: 1em auto; max-width: 500px; width: 90%; background-color: #fff; border-radius: 12px; }\n          .tonicpow-modal__box > h2 { margin-top: 0; text-align: left; }\n          .tonicpow-modal__box > h2 > .tonicpow-modal__close { float: right; cursor: pointer; }\n          ",e=document.createElement("style");e.appendChild(document.createTextNode(t)),document.head.appendChild(e),this.buttonViewsInitialized=!0,window.addEventListener("message",(t=>{if(t.data&&t.data.buttonId&&"tonicpow"===t.data.source){const e=this.shareButtons.get(t.data.buttonId)||{};t.data.error?e.hasOwnProperty("onError")&&"function"==typeof e.onError?e.onError(t.data):a.showPopup({title:"ERROR: "+t.data.error,message:t.data.message}):e.hasOwnProperty("onSuccess")&&"function"==typeof e.onSuccess?e.onSuccess(t.data):a.showPopup({title:"TonicPow link",message:t.data.shortLinkURL})}}))}}static showPopup(t){const e=document.createElement("div");e.id="tonicpow-widget-popup",e.classList.add("tonicpow-modal"),e.innerHTML=`\n      <div class="tonicpow-modal__overlay" onclick="TonicPow.closePopup();"></div>\n      <div class="tonicpow-modal__box">\n        <h2>\n          ${t.title}\n          <span class="tonicpow-modal__close" onclick="TonicPow.closePopup();">X</span>\n        </h2>\n        <p>${t.message}</p>\n      </div>\n    `,document.body.appendChild(e)}initializeBanner(t){return s(this,void 0,void 0,(function*(){const e=t.getAttribute(this.config.widgetIdAttribute);if(e){this.widgets.set(e,null);try{const n=yield fetch(`${this.config.apiUrl}/v1/widgets/display/${e}?provider=embed-${this.config.version}`);let i;403===n.status?(console.info(`${n.status}: Domain not allowed`),i={link_url:this.config.hostUrl,image_url:`${this.config.hostUrl}/images/widgetFallback.svg`}):i=yield n.json();const o=encodeURIComponent(i.title);t.innerHTML=`\n      <a href='${i.link_url}?utm_source=tonicpow-widgets&utm_medium=widget&utm_campaign=${e}&utm_content=${o}' style='display: inline-block'>\n      <img src='${i.image_url}' \n      width='${i.width}' \n      height='${i.height}' \n      alt='${i.title}' />\n      </a>`,t.setAttribute("data-width",i.width),t.setAttribute("data-height",i.height),this.widgets.set(e,i),this.options&&this.options.onWidgetLoaded&&(i.id=e,this.options.onWidgetLoaded(i))}catch(t){throw t}}else console.log(`${e} not found`)}))}}e.default=a;const c=new a;window.TonicPow=c||{}}.apply(e,i))||(t.exports=o)}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(607)})();